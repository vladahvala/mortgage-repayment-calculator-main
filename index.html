<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0"> 

  <link rel="icon" type="image/png" sizes="32x32" href="./assets/images/favicon-32x32.png">

  <link href="https://cdn.jsdelivr.net/npm/remixicon@3.5.0/fonts/remixicon.css" rel="stylesheet">

  
  <title>Frontend Mentor | Mortgage repayment calculator</title>

  <style>
    /* BASE CUSTOMIZATION */

      @font-face {
      font-family: 'PlusJakartaSans';
      src: url('./fonts/PlusJakartaSans-VariableFont_wght.ttf') format('truetype');
      font-weight: 100 900; /* бо variable font */
      font-style: normal;
    }

    @font-face {
      font-family: 'PlusJakartaSans';
      src: url('./fonts/PlusJakartaSans-Italic-VariableFont_wght.ttf') format('truetype');
      font-weight: 100 900;
      font-style: italic;
    }

    body{
      background-color: #e3f4fc;
      font-family: 'PlusJakartaSans', sans-serif;

      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;

      padding: 1rem;
    }

    h3, p, span {
      margin: 0;
      font-style: normal;
    }

    .mortgage-calculator{
      max-width: 63.75rem;
      width: 90%;
      display: flex; 
      border-radius: 1rem; 
      overflow: hidden;
      box-shadow: 0 4px 12px rgba(0,0,0,0.2);
      height: 31rem; 
      transition: height 0.1s ease;
      background-color: white;
    }

    .mortgage-calculator.error-visible {
      height: 33rem;
    }


    /* LEFT SECTION */
    .left-side{
      width: 50%;
      display: flex;
      flex-direction: column;
      padding: 2rem;
    }

    .title__container{
      display: flex;
      justify-content: space-between; 
      align-items: center; 
      margin-bottom: 2rem;
    }

    .title-left{
      font-style: normal;
      color: #23384b;
    }

    .clear{
      align-self: flex-end;
      color: #a3abad;
      text-decoration: underline;
      background-color: transparent;
      border: transparent;
      font-size: 1rem;
      cursor: pointer;
    }

    .input-group-amount,
    .input-group-term-rate,
    .input-pair-labels {
      display: flex;
      align-items: center;
      width: 100%; 
      max-width: 100%;
      border-radius: 0.5rem;
      overflow: hidden;
    }

    .input-group-amount {
      border: 0.5px solid gray;
      margin-top: 1rem;
      margin-bottom: 1rem;
    }

    .input-icon {
      background-color: #e3f4fc; 
      color: gray;
      height: 100%;
      padding: 0.8rem 1rem;

      font-weight: bold;
      display: flex;
      align-items: center;
      justify-content: center;

      user-select: none; 
      font-size: 1rem;
    }

    input[type="number"] {
      border: none;
      padding: 0.75rem 1rem;
      font-size: 0.9rem;
      flex: 1; 
      outline: none;
      color: #23384b;
      font-weight: bolder;
    }

    input[type="number"]::placeholder {
      color: #999;
    }

    .input-pair-labels
    {
      column-gap: 1rem;
    }
    
    label{
      margin-bottom: -0.5rem; 
      color: gray;
      font-size: 0.9rem;
      font-weight: 200;
    }

    .input-group-term-rate {
      display: flex;
      gap: 1rem; 
    }

    .years-label,
    .rate-label{
      flex: 1; 
      display: flex;
      align-items: center;
      margin-bottom: 0.5rem; 
    }

    #mortgage-amount{
      border: none;
      padding: 0.75rem 1rem;
      font-size: 0.9rem;
      flex: 1;
      outline: none;
      color: #23384b;
      font-weight: bolder;
    }

    #mortgage-amount:focus {
      outline: none;
    }

    .input-pair {
      flex: 1; 
      display: flex;
      align-items: center;
      border-radius: 0.5rem;
      overflow: hidden;
      border: 0.5px solid gray;

      flex-direction: row-reverse;
    }

    .input-pair .input-icon {
      align-self: flex-end;
    }

    #mortgage-rate,
    #mortgage-years {
      width: 2rem;
    }

    .radio-group{
      display: flex;
      flex-direction: column;
      row-gap: 1rem;
      margin-top: 1rem;
    }

    .radio-option{
      width: 100%;
      border: 1px solid gray;
      height: 2.1rem;
      display: flex;
      align-items: center;
      border-radius: 0.3rem;
      column-gap: 1rem;
      font-style: normal;
      color: #23384b;
      font-weight: 600;

      transition: background 0.3s;
      cursor: pointer;
    }

    .input-check {
      position: absolute;
      opacity: 0;
      pointer-events: none;
    }

    .custom-radio {
      margin-top: 1px;
      margin-left: 1rem;
      width: 0.8rem;
      height: 0.8rem;
      border: 2px solid gray;
      border-radius: 50%;
      background-color: white;
      display: inline-block;
      position: relative;
      transition: border-color 0.3s;
     
    }

    .custom-radio::after {
      content: '';
      position: absolute;
      top: 50%;
      left: 50%;
      width: 0.4rem;
      height: 0.4rem;
      background-color: #d4db36;
      border-radius: 50%;
      transform: translate(-50%, -50%) scale(0);
      transition: transform 0.2s ease;
    }

    .radio-option:has(.input-check:checked) .custom-radio {
      border-color: #d4db36;
    }

    .radio-option:has(.input-check:checked) .custom-radio::after {
      transform: translate(-50%, -50%) scale(1);
    }

    .radio-option:has(input[type="radio"]:checked) {
      background-color: rgba(249, 221, 35, 0.2);
      border: 2px solid #d4db36;
      color: black;
    }

    .type-label{
      margin-top: 1rem;
    }

    .calc-button{
      align-self: flex-start;
      height: 2.7rem;
      width: 16rem;
      background-color: #dcd932;
      border-radius: 2rem;
      justify-content: center;
      margin-top: 2.5rem;
      display: flex;
      column-gap: 0.75rem;
      font-style: normal;
      color: #23384b;
      font-weight: 600;
      cursor: pointer;
      border: transparent;
    }

    .calc-text{
      align-self: center;
      text-align: center;
      font-size:1rem;
    }

    .ri-calculator-line{
      align-self: center;
      font-size: large;
    }


    /* RIGHT SECTION */
    .right-side{
      background-color: #133040;
      border-radius: 0% 0% 0% 28%;
      width: 50%;
      display: flex;
      flex-direction: column;
      padding: 2rem;
    }

    .title-right{
      font-style: normal;
      color: #ffffff;
    }

    .right-text{
      margin-top: 1rem;
      color: white;
      font-size: 0.9rem;
      line-height: 1.5rem;
      opacity: 0.7;
    }

    .right-card{
      width: 90%;
      align-self: center;
      margin-top: 2rem;
      height: 12.5rem;
      background-color: #091820;
      border-radius: 1rem;
      box-shadow: 0rem -3px 0px yellow;
      padding-top: 2rem;
      padding-left: 2rem;
      display: flex;
      flex-direction: column;
    }

    .right-card-text,
    .right-card-text-bottom{
      color: white;
      font-style: normal;
      font-size: 14px;
      opacity: 0.7;
    }

    .right-card-sum{
      color: #ced342;
      font-style: normal;
      font-size: 2.5rem;
      margin-top: 1rem;
      font-weight: 600;
    }

    .right-card-line {
      border: none;
      border-top: 1px solid rgba(255, 255, 255, 0.4);
      margin: 0.5rem 0;
      width: 90%;
      opacity: 0.5;
      margin-top: 1.5rem;
    }

    .right-card-text-bottom{
      margin-top: 1rem;
    }

    .right-card-num-bottom{
      color: white;
      font-style: normal;
      font-size: 1rem;
      margin-top: 0.5rem;
      font-weight: 600;
    }


     /* ERROR */

    input.input-error {
      border: 2px solid red !important;
      outline: none;
    }

    #error-message{
      color: red; 
      font-weight: 600; 
      margin-bottom: 1rem; 
      margin-top: 1rem; 
      display: none;
    }

    @media (max-width: 768px) {
      .mortgage-calculator {
        flex-direction: column;
        height: auto;
      }

      .left-side, .right-side {
        width: 100%;
      }

      .right-side {
        border-radius: 0 0 1rem 1rem;
      }

      .calc-button {
        width: 100%;
      }

      .right-card {
        width: 100%;
      }
    }


  </style>
</head>
<body>

  <div class="mortgage-calculator">
    <div class="left-side">
      <div class="title__container">
        <h3 class="title-left">Mortgage Calculator</h3>
        <button class="clear">Clear all</button>
      </div>
      <label for="mortgage-amount">Mortgage Amount</label>
      <div class="input-group-amount">
        <span class="input-icon">£</span>
        <input id="mortgage-amount" type="text" step="0.001" placeholder="Enter amount" />
      </div> 
      <div class="input-pair-labels">
        <label for="mortgage-years" class="years-label">Mortgage Term</label>
        <label for="mortgage-rate" class="rate-label">Interest Rate</label>
      </div>
      <div class="input-group-term-rate">
        <div class="input-pair">
          <span class="input-icon">years</span>
          <input id="mortgage-years" type="number" step="0.001" placeholder="Enter years" />
        </div>
        <div class="input-pair">
          <span class="input-icon">%</span>
          <input id="mortgage-rate" type="number" step="0.001" placeholder="Enter rate" />
        </div>
      </div>     
      <label for="radio-group" class="type-label">Mortgage Type</label>
      <div class="radio-group">
        <label class="radio-option">
          <input class="input-check" type="radio" name="mortgage-type" value="repayment" checked>
          <span class="custom-radio"></span>
          Repayment
        </label>
        <label class="radio-option">
          <input class="input-check" type="radio" name="mortgage-type" value="interest-only">
          <span class="custom-radio"></span>
          Interest Only
        </label>
      </div>
      <button class="calc-button">
        <i class="ri-calculator-line"></i>
        <span class="calc-text">Calculate Repayments</span>
      </button>
      <div id="error-message">
        Please fill in all fields correctly.
      </div>
      
       
    </div>
    <div class="right-side">
      <h3 class="title-right">Your results</h3>
      <p class="right-text">Your results are shown below based on the information you provided. 
        To adjust the results, edit the form and click “calculate repayments” again.</p>
      <div class="right-card">
        <span class="right-card-text">Your monthly repayments</span>
        <span id="monthly-payment" class="right-card-sum">£0</span>
        <hr class="right-card-line">
        <span class="right-card-text-bottom">Total you'll repay over the term</span>
        <span id="total-repayment" class="right-card-num-bottom">£0</span>
      </div>
    </div>
  </div>
</body>


<script>
  // insert commas into the integer part for readability (e.g., 1000000 → 1,000,000)
  const mortgageAmountInput = document.getElementById('mortgage-amount');

  mortgageAmountInput.addEventListener('input', e => {
    let value = e.target.value.replace(/[^0-9.]/g, '');
    let parts = value.split('.');
    parts[0] = parts[0].replace(/\B(?=(\d{3})+(?!\d))/g, ',');
    e.target.value = parts.join('.');
  });

  const calcButton = document.querySelector('.calc-button');

  const amountInput = document.getElementById('mortgage-amount');
  const yearsInput = document.getElementById('mortgage-years');
  const rateInput = document.getElementById('mortgage-rate');
  const typeInputs = document.getElementsByName('mortgage-type');

  const monthlyEl = document.getElementById('monthly-payment');
  const totalEl = document.getElementById('total-repayment');

  calcButton.addEventListener('click', () => {
    // Remove red borders before validation
    amountInput.classList.remove('input-error');
    yearsInput.classList.remove('input-error');
    rateInput.classList.remove('input-error');

    // Remove commas before parsing
    const principal = parseFloat(amountInput.value.replace(/,/g, ''));
    const years = parseFloat(yearsInput.value);
    const rate = parseFloat(rateInput.value);

    const errorMessage = document.getElementById('error-message');
    errorMessage.style.display = 'none';

    let valid = true;

    if (isNaN(principal) || principal <= 0) {
      amountInput.classList.add('input-error');
      valid = false;
    }

    if (isNaN(years) || years <= 0 || !Number.isInteger(years)) {
      yearsInput.classList.add('input-error');
      valid = false;
    }

    if (isNaN(rate) || rate < 0) {
      rateInput.classList.add('input-error');
      valid = false;
    }

    if (!valid) {
      errorMessage.style.display = 'block';
      document.querySelector('.mortgage-calculator').classList.add('error-visible');
      monthlyEl.textContent = '£' + 0;
      totalEl.textContent = '£' + 0;
      return;
    } else {
      errorMessage.style.display = 'none';
      document.querySelector('.mortgage-calculator').classList.remove('error-visible');
    }


    const selectedType = [...typeInputs].find(r => r.checked).value;
    const months = years * 12;
    const monthlyRate = rate / 12 / 100;

    let monthlyPayment = 0;
    let totalRepayment = 0;

     // Count monthly and total payment 
    if (selectedType === 'repayment') {
      if (monthlyRate === 0) {
        monthlyPayment = principal / months;
      } else {
        monthlyPayment = principal * (monthlyRate * Math.pow(1 + monthlyRate, months)) / (Math.pow(1 + monthlyRate, months) - 1);
      }
      totalRepayment = monthlyPayment * months;
    } else if (selectedType === 'interest-only') {
      monthlyPayment = principal * monthlyRate;
      totalRepayment = monthlyPayment * months + principal;
    }

    monthlyEl.textContent = '£' + monthlyPayment.toLocaleString('en-GB', { minimumFractionDigits: 2, maximumFractionDigits: 2 });
    totalEl.textContent = '£' + totalRepayment.toLocaleString('en-GB', { minimumFractionDigits: 2, maximumFractionDigits: 2 });
  });

   // Logic for Clear button
  const clearButton = document.querySelector('.clear');

  clearButton.addEventListener('click', () => {
    amountInput.value = '';
    yearsInput.value = '';
    rateInput.value = '';
    monthlyEl.textContent = '£0';
    totalEl.textContent = '£0';

    amountInput.classList.remove('input-error');
    yearsInput.classList.remove('input-error');
    rateInput.classList.remove('input-error');

    const errorMessage = document.getElementById('error-message');
    errorMessage.style.display = 'none';
    document.querySelector('.mortgage-calculator').classList.remove('error-visible');

  });


</script>

</html>

